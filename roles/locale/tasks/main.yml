---
- name: enable locales (/etc/locale.gen)
  lineinfile:
    path: /etc/locale.gen
    regexp: "^#({{ item }})+(.*)$"
    backrefs: yes
    line: '\1\2'
    state: present
  with_items: "{{ locale_generate }}"
  become: true
  
- name: generate locales
  command: locale-gen
  become: true

- name: set locale settings (/etc/locale.conf)
  lineinfile:
    path: /etc/locale.conf
    regexp: "{{ item.regexp }}"
    line: "{{ item.line }}"
  with_items:
    - { regexp: "^LANG=", line: "LANG={{ locale_default }}" }
  become: true

- name: set timezone (/etc/localetime)
  file:
    src: /usr/share/zoneinfo/{{ locale_tiemezone }}
    dest: /etc/localtime
    state: link
  become: true


  # Wed Aug 13 05:26:42 AM UTC 2025