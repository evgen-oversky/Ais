---

- name: enable locales (/etc/locale.gen)
  lineinfile:
    path: /etc/locale.gen
    regexp: "^#({{ item }})+(.*)$"
    backrefs: true 
    line: '\1\2'
    state: present
  with_items: "{{ locales_generate }}"
  become: true

- name: generate locales
  command: locale-gen
  become: true

- name: set locale settings (/etc/locale.conf)
  lineinfile:
    path: /etc/locale.conf
    regexp: "{{ item.regexp }}"
    line: "{{ item.line }}"
  with_items:
    - { regexp: "^LANG=", line: "LANG={{ locale_default }}" }
    - { regexp: "^LANGUAGE=", line: "LANGUAGE={{ locale_default }}" }
  become: true

- name: set timezone (/etc/locales)
  ansible.builtin.timezone:
    name: "{{ locale_timezone }}"
  become: true

# Добавить NTP
